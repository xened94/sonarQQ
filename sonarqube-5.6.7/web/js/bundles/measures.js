webpackJsonp([14],{0:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=i(249),r=n(a),l=i(395),o=n(l),s=i(1219),u=n(s),c=i(1221),d=n(c),f=i(1230),h=n(f),p=i(1225),m=n(p),v=i(1232),g=n(v),y=i(1234),w=n(y),b=i(1238),V=n(b),x=i(1240),F=n(x),C=i(1242),k=n(C),D=i(257),_=new o["default"].Application,j=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.last_analysis"),propertyFrom:"ageMinDays",propertyTo:"ageMaxDays",type:V["default"].RangeFilterView,placeholder:(0,D.translate)("measure_filter.criteria.age.days"),enabled:!1,optional:!0})},S=function(e){return new d["default"].Filter({property:e,name:(0,D.translate)("measure_filter.criteria.metric"),type:k["default"],metrics:window.SS.metrics,periods:window.SS.metricPeriods,operations:{eq:"=",lt:"<",lte:"≤",gt:">",gte:"≥"},enabled:!1,optional:!0})},$=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.name_contains"),property:"nameSearch",type:F["default"],enabled:!1,optional:!0})},M=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.alert"),property:"alertLevels[]",type:m["default"].ChoiceFilterView,enabled:!1,optional:!0,choices:{error:(0,D.translate)("measure_filter.criteria.alert.error"),warn:(0,D.translate)("measure_filter.criteria.alert.warn"),ok:(0,D.translate)("measure_filter.criteria.alert.ok")}})},O=function(e){var t=document.createElement("div");t.classList.add("alert","alert-warning"),t.textContent=e;var i=document.querySelector(".navigator-details");i.insertBefore(t,i.firstChild)},T=function(){if(_.addRegions({filtersRegion:".navigator-filters"}),this.filters=new d["default"].Filters,r["default"].isObject(window.SS.favorites)&&this.filters.add([new d["default"].Filter({type:w["default"].FavoriteFilterView,enabled:!0,optional:!1,choices:window.SS.favorites,favoriteUrl:"/measures/filter",manageUrl:"/measures/manage"})]),this.filters.add([new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.components"),property:"qualifiers[]",type:m["default"].ChoiceFilterView,enabled:!0,optional:!1,choices:window.SS.qualifiers,defaultValue:(0,D.translate)("any")}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.components_of"),property:"base",type:g["default"].ComponentFilterView,multiple:!1,enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.only_favorites"),property:"onFavourites",type:h["default"],enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.date"),propertyFrom:"fromDate",propertyTo:"toDate",type:V["default"].DateRangeFilterView,enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.key_contains"),property:"keySearch",type:F["default"],enabled:!1,optional:!0})]),this.filters.add([j(),S("c3"),S("c2"),S("c1"),$(),M()]),this.filterBarView=new u["default"]({collection:this.filters,extra:{sort:"",asc:!1}}),this.filtersRegion.show(this.filterBarView),window.queryParams&&_.filterBarView.restoreFromQuery(window.queryParams),key.setScope("list"),window.queryParams){var e=window.queryParams.find(function(e){return"qualifiers[]"===e.key}),t=!e||!e.value||!e.value.length,i=window.queryParams.find(function(e){return"base"===e.key}),n=!i||!i.value||!i.value.length,a=window.queryParams.find(function(e){return"onFavourites"===e.key}),l=!a||!a.value;t&&n&&l&&O((0,D.translate)("measures.select_components"))}};_.on("start",function(){T.call(_)}),window.sonarqube.appStarted.then(function(e){return _.start(e)})},257:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.join(".");return w[n]||n}function r(e){for(var t=w[e],i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return t?n.reduce(function(e,t,i){return e.replace("{"+i+"}",t)},t):e+"."+n.join(".")}function l(){return window.navigator.languages?window.navigator.languages[0]:window.navigator.language}function o(e){var t=window.baseUrl+"/api/l10n/index?"+(0,v.stringify)(e);return fetch(t,{credentials:"same-origin"}).then(function(e){switch(e.status){case 200:return e.json();case 304:return JSON.parse(localStorage.getItem("l10n.bundle"));case 401:return window.location=window.baseUrl+"/sessions/new?return_to="+encodeURIComponent(window.location.pathname+window.location.search+window.location.hash),{};default:throw new Error("Unexpected status code: "+e.status)}})}function s(){var e=localStorage.getItem("l10n.bundle");if(!e)return!1;try{var t=JSON.parse(e);return null!=t&&"object"===("undefined"==typeof t?"undefined":m(t))}catch(i){return!1}}function u(){var e=l(),t=localStorage.getItem("l10n.locale");t!==e&&localStorage.removeItem("l10n.timestamp");var i=localStorage.getItem("l10n.timestamp"),n={locale:e};return null!==i&&s()&&(n.ts=i),o(n).then(function(t){try{var i=(0,y["default"])().format("YYYY-MM-DDTHH:mm:ssZZ");localStorage.setItem("l10n.timestamp",i),localStorage.setItem("l10n.locale",e),localStorage.setItem("l10n.bundle",JSON.stringify(t))}catch(n){}w=t})}function c(e){w=e}function d(){window.t=a,window.tp=r,window.requestMessages=u}function f(e){var t="dashboard."+e+".name",i=a(t);return i!==t?i:e}function h(e){var t="metric."+e.key+".name",i=a(t);return i!==t?i:e.name}function p(e){var t="metric_domain."+e,i=a(t);return i!==t?i:e}Object.defineProperty(t,"__esModule",{value:!0});var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.translate=a,t.translateWithParameters=r,t.requestMessages=u,t.resetBundle=c,t.installGlobal=d,t.getLocalizedDashboardName=f,t.getLocalizedMetricName=h,t.getLocalizedMetricDomain=p;var v=i(258),g=i(261),y=n(g),w={}},258:function(e,t,i){"use strict";t.decode=t.parse=i(259),t.encode=t.stringify=i(260)},259:function(e,t){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var l=/\+/g;e=e.split(t);var o=1e3;a&&"number"==typeof a.maxKeys&&(o=a.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var c,d,f,h,p=e[u].replace(l,"%20"),m=p.indexOf(n);m>=0?(c=p.substr(0,m),d=p.substr(m+1)):(c=p,d=""),f=decodeURIComponent(c),h=decodeURIComponent(d),i(r,f)?Array.isArray(r[f])?r[f].push(h):r[f]=[r[f],h]:r[f]=h}return r}},260:function(e,t){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(a){var r=encodeURIComponent(i(a))+n;return Array.isArray(e[a])?e[a].map(function(e){return r+encodeURIComponent(i(e))}).join(t):r+encodeURIComponent(i(e[a]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""}},417:function(e,t){"use strict";e.exports=function(){var e=Array.prototype.slice.call(arguments,0,-1);return window.t.apply(this,e)}},1219:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(1220),o=n(l);t["default"]=o["default"].extend({template:function(){return(0,r["default"])("#filter-bar-template").html()}})},1220:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(395),u=n(s),c=i(1221),d=n(c),f=i(1224),h=n(f);t["default"]=u["default"].CompositeView.extend({childViewContainer:".navigator-filters-list",collectionEvents:{"change:enabled":"changeEnabled"},getChildView:function(e){return e.get("type")||d["default"].BaseFilterView},childViewOptions:function(){return{filterBarView:this,app:this.options.app}},initialize:function(){u["default"].CompositeView.prototype.initialize.apply(this,arguments);var e=this;(0,r["default"])("body").on("click",function(){e.hideDetails()}),this.addMoreCriteriaFilter(),key.filter=function(e){var t=!0,i=(0,r["default"])(e.target),n=i.closest(".navigator-filter-details-inner"),a=n.find(":tabbable"),l=i.is(":input")||i.is("a"),o=i.closest(".ui-dialog").length>0;return l&&(t=!(o||9!==e.keyCode&&27!==e.keyCode)&&a.index(i)>=a.length-1),t},key("tab","list",function(){return key.setScope("filters"),e.selectFirst(),!1}),key("shift+tab","filters",function(){return e.selectPrev(),!1}),key("tab","filters",function(){return e.selectNext(),!1}),key("escape","filters",function(){e.hideDetails(),this.selected=-1,key.setScope("list")})},getEnabledFilters:function(){return this.$(this.childViewContainer).children().not(".navigator-filter-disabled").not(".navigator-filter-inactive").not(".navigator-filter-favorite")},selectFirst:function(){this.selected=-1,this.selectNext()},selectPrev:function(){var e=this.getEnabledFilters();this.selected>0&&(e.eq(this.selected).blur(),this.selected--,e.eq(this.selected).click(),this.$(".navigator-filter-submit").blur())},selectNext:function(){var e=this.getEnabledFilters();this.selected<e.length-1?(e.eq(this.selected).blur(),this.selected++,e.eq(this.selected).click()):(this.selected=e.length,this.hideDetails(),this.$(".navigator-filter-submit").focus())},addMoreCriteriaFilter:function(){var e=this.collection.where({enabled:!1});e.length>0&&(this.moreCriteriaFilter=new d["default"].Filter({type:h["default"].MoreCriteriaFilterView,enabled:!0,optional:!1,filters:e}),this.collection.add(this.moreCriteriaFilter))},onAddChild:function(e){e.model.get("type")===h["default"].FavoriteFilterView&&(0,r["default"])(".navigator-header").addClass("navigator-header-favorite")},restoreFromQuery:function(e){this.collection.each(function(t){t.set("enabled",!t.get("optional")),t.view.clear(),t.view.restoreFromQuery(e)})},hideDetails:function(){o["default"].isObject(this.showedView)&&this.showedView.hideDetails()},enableFilter:function(e){var t=this.collection.get(e),i=t.view;i.$el.detach().insertBefore(this.$(".navigator-filter-more-criteria")),t.set("enabled",!0),i.showDetails()},changeEnabled:function(){var e=o["default"].reject(this.collection.where({enabled:!1}),function(e){return e.get("type")===h["default"].MoreCriteriaFilterView});0===e.length?this.moreCriteriaFilter.set({enabled:!1},{silent:!0}):this.moreCriteriaFilter.set({enabled:!0},{silent:!0}),this.moreCriteriaFilter.set("filters",e)}})},1221:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(392),u=n(s),c=i(395),d=n(c),f=i(1222),h=n(f),p=i(1223),m=n(p),v=u["default"].Model.extend({defaults:{enabled:!0,optional:!1,multiple:!0,placeholder:""}}),g=u["default"].Collection.extend({model:v}),y=d["default"].ItemView.extend({template:m["default"],className:"navigator-filter-details",initialize:function(){this.$el.on("click",function(e){e.stopPropagation()}),this.$el.attr("id","filter-"+this.model.get("property"))},onShow:function(){},onHide:function(){}}),w=d["default"].ItemView.extend({template:h["default"],className:"navigator-filter",events:function(){return{click:"toggleDetails","click .navigator-filter-disable":"disable"}},modelEvents:{"change:enabled":"focus","change:value":"renderBase","change:filters":"render"},initialize:function(e){d["default"].ItemView.prototype.initialize.apply(this,arguments);var t=e&&e.projectsView||y;this.projectsView=new t({model:this.model,filterView:this}),this.model.view=this},attachDetailsView:function(){this.projectsView.$el.detach().appendTo((0,r["default"])("body"))},render:function(){this.renderBase(),this.attachDetailsView(),this.projectsView.render(),this.$el.toggleClass("navigator-filter-disabled",!this.model.get("enabled")),this.$el.toggleClass("navigator-filter-optional",this.model.get("optional"))},renderBase:function(){d["default"].ItemView.prototype.render.apply(this,arguments),this.renderInput();var e=this.model.get("name")+": "+this.renderValue();this.$el.prop("title",e),this.$el.attr("data-property",this.model.get("property"))},renderInput:function(){},focus:function(){this.render()},toggleDetails:function(e){e.stopPropagation(),this.options.filterBarView.selected=this.options.filterBarView.getEnabledFilters().index(this.$el),this.$el.hasClass("active")?(key.setScope("list"),this.hideDetails()):(key.setScope("filters"),this.showDetails())},showDetails:function(){this.registerShowedDetails();var e=this.$el.offset().top+this.$el.outerHeight()-1,t=this.$el.offset().left;this.projectsView.$el.css({top:e,left:t}).addClass("active"),this.$el.addClass("active"),this.projectsView.onShow()},registerShowedDetails:function(){this.options.filterBarView.hideDetails(),this.options.filterBarView.showedView=this},hideDetails:function(){this.projectsView.$el.removeClass("active"),this.$el.removeClass("active"),this.projectsView.onHide()},isActive:function(){return this.$el.is(".active")},renderValue:function(){return this.model.get("value")||"unset"},isDefaultValue:function(){return!0},restoreFromQuery:function(e){var t=o["default"].findWhere(e,{key:this.model.get("property")});t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e){this.model.set({value:e},{silent:!0}),this.renderBase()},clear:function(){this.model.unset("value")},disable:function(e){e.stopPropagation(),this.hideDetails(),this.options.filterBarView.hideDetails(),this.model.set({enabled:!1,value:null})},formatValue:function(){var e={};return this.model.has("property")&&this.model.has("value")&&this.model.get("value")&&(e[this.model.get("property")]=this.model.get("value")),e},serializeData:function(){return o["default"].extend({},this.model.toJSON(),{value:this.renderValue(),defaultValue:this.isDefaultValue()})}});t["default"]={Filter:v,Filters:g,BaseFilterView:w,DetailsFilterView:y}},1222:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){return"default"},3:function(e,t,i,n){return'  <div class="navigator-filter-disable">&times;</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,r,l="function",o=t.helperMissing,s=this.escapeExpression,u='<div class="navigator-filter-label">'+s((r=null!=(r=t.name||(null!=e?e.name:e))?r:o,typeof r===l?r.call(e,{name:"name",hash:{},data:n}):r))+'</div>\n<div class="navigator-filter-value ';return a=t["if"].call(e,null!=e?e.defaultValue:e,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+='">'+s((r=null!=(r=t.value||(null!=e?e.value:e))?r:o,typeof r===l?r.call(e,{name:"value",hash:{},data:n}):r))+"</div>\n",a=t["if"].call(e,null!=e?e.optional:e,{name:"if",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u},useData:!0})},1223:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){return'<div class="navigator-filter-details-inner"></div>\n'},useData:!0})},1224:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(1225),u=n(s),c=i(1228),d=n(c),f=i(1229),h=n(f),p=u["default"].DetailsChoiceFilterView.extend({template:h["default"],events:{"click label[data-id]:not(.inactive)":"enableFilter"},enableById:function(e){this.model.view.options.filterBarView.enableFilter(e),this.model.view.hideDetails()},enableByProperty:function(e){var t=o["default"].find(this.model.get("filters"),function(t){return t.get("property")===e});t&&this.enableById(t.cid)},enableFilter:function(e){var t=(0,r["default"])(e.target).data("id");this.enableById(t),this.updateCurrent(0)},selectCurrent:function(){this.$("label").eq(this.currentChoice).click()},serializeData:function(){var e=this.model.get("filters").map(function(e){return o["default"].extend(e.toJSON(),{id:e.cid})}),t=function(e){return e.name},i=o["default"].unique(e,t),n=o["default"].sortBy(i,t);return o["default"].extend(this.model.toJSON(),{filters:n})}}),m=u["default"].ChoiceFilterView.extend({template:d["default"],className:"navigator-filter navigator-filter-more-criteria",initialize:function(){u["default"].ChoiceFilterView.prototype.initialize.call(this,{projectsView:p})},renderValue:function(){return""},renderInput:function(){},renderBase:function(){u["default"].ChoiceFilterView.prototype.renderBase.call(this),this.$el.prop("title","")},isDefaultValue:function(){return!1}});t["default"]={DetailsMoreCriteriaFilterView:p,MoreCriteriaFilterView:m}},1225:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(392),u=n(s),c=i(1221),d=n(c),f=i(1226),h=n(f),p=i(1227),m=n(p),v=i(257),g=d["default"].DetailsFilterView.extend({template:h["default"],itemTemplate:m["default"],events:function(){return{"click label":"onCheck"}},render:function(){d["default"].DetailsFilterView.prototype.render.apply(this,arguments),this.updateLists()},renderList:function(e,t){var i=this,n=this.$(t);n.empty().toggleClass("hidden",0===e.length),e.each(function(e){n.append(i.itemTemplate(o["default"].extend(e.toJSON(),{multiple:i.model.get("multiple")&&"!"!==e.get("id")[0]})))})},updateLists:function(){var e=new u["default"].Collection(this.options.filterView.choices.reject(function(e){return"!"===e.get("id")[0]})),t=new u["default"].Collection(this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]}));this.renderList(e,".choices"),this.renderList(t,".opposite");var i=this.currentChoice||0;this.updateCurrent(i)},onCheck:function(e){var t=(0,r["default"])(e.currentTarget),i=t.data("id"),n=t.find(".icon-checkbox-checked").length>0;this.model.get("multiple")?t.closest(".opposite").length>0?this.options.filterView.choices.each(function(e){e.set("checked",!1)}):this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]}).forEach(function(e){e.set("checked",!1)}):this.options.filterView.choices.each(function(e){e.set("checked",!1)}),this.options.filterView.choices.get(i).set("checked",!n),this.updateValue(),this.updateLists()},updateValue:function(){this.model.set("value",this.options.filterView.getSelected().map(function(e){return e.get("id")}))},updateCurrent:function(e){this.currentChoice=e,this.$("label").removeClass("current").eq(this.currentChoice).addClass("current")},onShow:function(){this.bindedOnKeyDown=o["default"].bind(this.onKeyDown,this),(0,r["default"])("body").on("keydown",this.bindedOnKeyDown)},onHide:function(){(0,r["default"])("body").off("keydown",this.bindedOnKeyDown)},onKeyDown:function(e){switch(e.keyCode){case 38:e.preventDefault(),this.selectPrevChoice();break;case 40:e.preventDefault(),this.selectNextChoice();break;case 13:e.preventDefault(),this.selectCurrent()}},selectNextChoice:function(){this.$("label").length>this.currentChoice+1&&(this.updateCurrent(this.currentChoice+1),this.scrollNext())},scrollNext:function(){var e=this.$("label").eq(this.currentChoice);if(e.length>0){var t=e.closest("ul"),i=e.offset().top-t.offset().top+t.scrollTop(),n=i-t.height()+e.outerHeight();n>0&&t.scrollTop(n)}},selectPrevChoice:function(){this.currentChoice>0&&(this.updateCurrent(this.currentChoice-1),this.scrollPrev())},scrollPrev:function(){var e=this.$("label").eq(this.currentChoice);if(e.length>0){var t=e.closest("ul"),i=e.offset().top-t.offset().top;i<0&&t.scrollTop(t.scrollTop()+i)}},selectCurrent:function(){var e=this.$("label").eq(this.currentChoice);e.click()},serializeData:function(){return o["default"].extend({},this.model.toJSON(),{choices:new u["default"].Collection(this.options.filterView.choices.reject(function(e){return"!"===e.get("id")[0]})).toJSON(),opposite:new u["default"].Collection(this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]})).toJSON()})}}),y=d["default"].BaseFilterView.extend({initialize:function(e){d["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:e&&e.projectsView?e.projectsView:g});var t=0,i=this.model.get("choiceIcons");this.choices=new u["default"].Collection(o["default"].map(this.model.get("choices"),function(e,n){var a=new u["default"].Model({id:n,text:e,checked:!1,index:t++});return i&&i[n]&&a.set("icon",i[n]),a}),{comparator:"index"})},getSelected:function(){return this.choices.filter(function(e){return e.get("checked")})},renderInput:function(){var e=(0,r["default"])("<select>").prop("name",this.model.get("property")).prop("multiple",!0).css("display","none");this.choices.each(function(t){var i=(0,r["default"])("<option>").prop("value",t.get("id")).prop("selected",t.get("checked")).text(t.get("text"));i.appendTo(e)}),e.appendTo(this.$el)},renderValue:function(){var e=this.getSelected().map(function(e){return e.get("text")}),t=this.model.has("defaultValue")?this.model.get("defaultValue"):this.model.get("multiple")?(0,v.translate)("all"):(0,v.translate)("any");return this.isDefaultValue()?t:e.join(", ")},isDefaultValue:function(){var e=this.getSelected();return 0===e.length},disable:function(){this.choices.each(function(e){e.set("checked",!1)}),d["default"].BaseFilterView.prototype.disable.apply(this,arguments)},restoreFromQuery:function(e){var t=o["default"].findWhere(e,{key:this.model.get("property")});this.choices&&this.choices.forEach(function(i){if("!"===i.get("id")[0]){var n=o["default"].findWhere(e,{key:i.get("id").substr(1)});if(i.get("id").indexOf("=")>=0){var a=i.get("id").split("=")[0].substr(1),r=i.get("id").split("=")[1];n=o["default"].findWhere(e,{key:a,value:r})}if(null==n)return;t?t.value+=","+i.get("id"):t={value:i.get("id")}}}),t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e){if(o["default"].isString(e)&&(e=e.split(",")),this.choices&&e.length>0){var t=this;t.choices.each(function(e){e.set("checked",!1)});var i=[];o["default"].each(e,function(e){var n=t.choices.findWhere({id:e});n?n.set("checked",!0):i.push(e)}),e=o["default"].difference(e,i),this.model.set({value:e,enabled:!0}),this.render()}else this.clear()},clear:function(){this.choices&&this.choices.each(function(e){e.set("checked",!1)}),this.model.unset("value"),this.projectsView.render(),this.projectsView.updateCurrent&&this.projectsView.updateCurrent(0)},formatValue:function(){var e={};if(this.model.has("property")&&this.model.has("value")&&this.model.get("value").length>0){var t=o["default"].filter(this.model.get("value"),function(e){return"!"===e[0]});t.length>0?t.forEach(function(t){if(t.indexOf("=")>=0){var i=t.split("=");e[i[0].substr(1)]=i[1]}else e[t.substr(1)]=!1}):e[this.model.get("property")]=this.model.get("value").join(",")}return e}});t["default"]={DetailsChoiceFilterView:g,ChoiceFilterView:y}},1226:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){return'<ul class="navigator-filter-select-list choices"></ul>\n<ul class="navigator-filter-select-list opposite"></ul>\n'},useData:!0})},1227:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){return"icon-checkbox-checked"},3:function(e,t,i,n){return"icon-checkbox-single"},5:function(e,t,i,n){var a,r="function",l=t.helperMissing,o=this.escapeExpression;return'<i class="icon-'+o((a=null!=(a=t.icon||(null!=e?e.icon:e))?a:l,typeof a===r?a.call(e,{name:"icon",hash:{},data:n}):a))+'"></i>'},7:function(e,t,i,n){var a,r="function",l=t.helperMissing,o=this.escapeExpression;return'      <br>\n      <span>\n        <i class="icon-checkbox icon-checkbox-invisible"></i>\n        <span class="note">'+o((a=null!=(a=t.category||(null!=e?e.category:e))?a:l,typeof a===r?a.call(e,{name:"category",hash:{},data:n}):a))+"</span>\n      </span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,r,l="function",o=t.helperMissing,s=this.escapeExpression,u='<li>\n  <label title="'+s((r=null!=(r=t.text||(null!=e?e.text:e))?r:o,typeof r===l?r.call(e,{name:"text",hash:{},data:n}):r))+'" data-id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:o,typeof r===l?r.call(e,{name:"id",hash:{},data:n}):r))+'">\n    <span>\n      <i class="icon-checkbox ';return a=t["if"].call(e,null!=e?e.checked:e,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+=" ",a=t.unless.call(e,null!=e?e.multiple:e,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+='"></i>\n      ',a=t["if"].call(e,null!=e?e.icon:e,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+="\n      "+s((r=null!=(r=t.text||(null!=e?e.text:e))?r:o,typeof r===l?r.call(e,{name:"text",hash:{},data:n}):r))+"\n    </span>\n",a=t["if"].call(e,null!=e?e.category:e,{name:"if",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+"  </label>\n</li>\n"},useData:!0})},1228:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var r=this.escapeExpression;return r(i(417).call(e,"moreCriteria",{name:"t",hash:{},data:a}))+"\n"},useData:!0})},1229:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){var a,r,l="function",o=t.helperMissing,s=this.escapeExpression,u='    <li>\n      <label data-id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:o,typeof r===l?r.call(e,{name:"id",hash:{},data:n}):r))+'" data-property="'+s((r=null!=(r=t.property||(null!=e?e.property:e))?r:o,typeof r===l?r.call(e,{name:"property",hash:{},data:n}):r))+'" ';return a=t["if"].call(e,null!=e?e.inactive:e,{name:"if",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+=" ",a=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u+">\n        "+s((r=null!=(r=t.name||(null!=e?e.name:e))?r:o,typeof r===l?r.call(e,{name:"name",hash:{},data:n}):r))+"\n      </label>\n    </li>\n"},2:function(e,t,i,n){return'class="inactive"'},4:function(e,t,i,n){var a,r="function",l=t.helperMissing,o=this.escapeExpression;return'title="'+o((a=null!=(a=t.title||(null!=e?e.title:e))?a:l,typeof a===r?a.call(e,{name:"title",hash:{},data:n}):a))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,r='<ul class="navigator-filter-select-list">\n';return a=t.each.call(e,null!=e?e.filters:e,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=a&&(r+=a),r+"</ul>\n"},useData:!0})},1230:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(1221),o=n(l),s=i(1231),u=n(s);t["default"]=o["default"].BaseFilterView.extend({template:u["default"],className:"navigator-filter navigator-filter-inline",events:function(){return{"click .navigator-filter-disable":"disable"}},showDetails:function(){},renderInput:function(){this.model.get("enabled")&&(0,r["default"])("<input>").prop("name",this.model.get("property")).prop("type","checkbox").prop("value","true").prop("checked",!0).css("display","none").appendTo(this.$el)},renderValue:function(){return this.model.get("value")},isDefaultValue:function(){return!1},restore:function(e){this.model.set({value:e,enabled:!0})}})},1231:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){return'  <div class="navigator-filter-disable">&times;</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,r,l="function",o=t.helperMissing,s=this.escapeExpression,u='<div class="navigator-filter-label">'+s((r=null!=(r=t.name||(null!=e?e.name:e))?r:o,typeof r===l?r.call(e,{name:"name",hash:{},data:n}):r))+"</div>\n";return a=t["if"].call(e,null!=e?e.optional:e,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=a&&(u+=a),u},useData:!0})},1232:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(392),u=n(s),c=i(1221),d=n(c),f=i(1225),h=n(f),p=i(1233),m=n(p),v=i(1227),g=n(v),y=100,w=u["default"].Collection.extend({comparator:"text",initialize:function(){this.more=!1,this.page=0},parse:function(e){return this.more=e.more,e.results},fetch:function(e){this.data=o["default"].extend({p:1,ps:y},e.data||{});var t=o["default"].extend({},e,{data:this.data});return u["default"].Collection.prototype.fetch.call(this,t)},fetchNextPage:function(e){if(this.more){this.data.p+=1;var t=o["default"].extend({remove:!1},e,{data:this.data});return this.fetch(t)}return!1}}),b=w.extend({url:function(){return window.baseUrl+"/api/users/search"},parse:function(e){var t=window.usersToSelect2(e);this.more=t.more,this.results=t.results}}),V=w.extend({url:function(){return window.baseUrl+"/api/resources/search?f=s2&q=TRK&display_key=true"}}),x=w.extend({url:function(){return window.baseUrl+"/api/resources/search?f=s2&qp=supportsGlobalDashboards&display_key=true"},parse:function(e){if(this.more=e.more,e.results.length>0&&e.results[0].children){var t=[];return o["default"].each(e.results,function(e){o["default"].each(e.children,function(i){i.category=e.text,t.push(i)})}),t}return e.results}}),F=h["default"].DetailsChoiceFilterView.extend({template:m["default"],listTemplate:g["default"],searchKey:"s",render:function(){h["default"].DetailsChoiceFilterView.prototype.render.apply(this,arguments);var e=this,t=function(t){37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode&&e.search()},i=o["default"].debounce(t,250),n=function(){e.scroll()},a=o["default"].throttle(n,1e3);this.$(".navigator-filter-search input").off("keyup keydown").on("keyup",i).on("keydown",this.keydown),this.$(".choices").off("scroll").on("scroll",a)},search:function(){var e=this;if(this.query=this.$(".navigator-filter-search input").val(),this.query.length>1){this.$el.addClass("fetching");var t=e.options.filterView.getSelected(),i={ps:y};i[this.searchKey]=this.query,this.options.filterView.choices.fetch({data:i,success:function(){t.forEach(function(t){e.options.filterView.choices.unshift(t)}),o["default"].each(e.model.get("choices"),function(t,i){"!"===i[0]&&e.options.filterView.choices.add(new u["default"].Model({id:i,text:t}))}),e.updateLists(),e.$el.removeClass("fetching"),e.$(".navigator-filter-search").removeClass("fetching-error")},error:function(){e.showSearchError()}})}else this.resetChoices(),this.updateLists()},showSearchError:function(){this.$el.removeClass("fetching"),this.$(".navigator-filter-search").addClass("fetching-error")},scroll:function(){var e=this,t=this.$(".choices"),i=t.scrollTop()>=t[0].scrollHeight-t.outerHeight();i&&this.options.filterView.choices.fetchNextPage().done(function(){e.updateLists()})},keydown:function(e){(0,o["default"])([38,40,13]).indexOf(e.keyCode)!==-1&&e.preventDefault()},resetChoices:function(){var e=this;this.options.filterView.choices.reset(this.options.filterView.choices.filter(function(e){return e.get("checked")})),o["default"].each(this.model.get("choices"),function(t,i){e.options.filterView.choices.add(new u["default"].Model({id:i,text:t}))})},onShow:function(){h["default"].DetailsChoiceFilterView.prototype.onShow.apply(this,arguments),this.resetChoices(),this.render(),this.$(".navigator-filter-search input").focus()}}),C=h["default"].ChoiceFilterView.extend({initialize:function(e){h["default"].ChoiceFilterView.prototype.initialize.call(this,{projectsView:e&&e.projectsView?e.projectsView:F})},isDefaultValue:function(){return 0===this.getSelected().length},renderInput:function(){var e=this.model.get("value")||[],t=(0,r["default"])("<input>").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(e.join());t.appendTo(this.$el)},restoreFromQuery:function(e){var t=o["default"].findWhere(e,{key:this.model.get("property")
});this.model.get("choices")&&o["default"].each(this.model.get("choices"),function(i,n){if("!"===n[0]){var a=o["default"].findWhere(e,{key:n.substr(1)});if(null==a)return;t?t.value+=","+n:t={value:n}}}),t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e,t){var i=this;if(o["default"].isString(e)&&(e=e.split(",")),this.choices&&e.length>0){this.model.set({value:e,enabled:!0});var n=o["default"].filter(e,function(e){return"!"===e[0]});n.forEach(function(e){i.choices.add(new u["default"].Model({id:e,text:i.model.get("choices")[e],checked:!0}))}),e=o["default"].reject(e,function(e){return"!"===e[0]}),o["default"].isArray(t.text)&&t.text.length===e.length?this.restoreFromText(e,t.text):this.restoreByRequests(e)}else this.clear()},restoreFromText:function(e,t){var i=this;o["default"].each(e,function(e,n){i.choices.add(new u["default"].Model({id:e,text:t[n],checked:!0}))}),this.onRestore(e)},restoreByRequests:function(e){var t=this,i=o["default"].map(e,function(e){return t.createRequest(e)});r["default"].when.apply(r["default"],i).done(function(){t.onRestore(e)})},onRestore:function(){this.projectsView.updateLists(),this.renderBase()},clear:function(){this.model.unset("value"),this.choices&&this.choices.reset([]),this.render()},createRequest:function(){}}),k=C.extend({initialize:function(){C.prototype.initialize.call(this,{projectsView:F}),this.choices=new x},createRequest:function(e){var t=this;return r["default"].ajax({url:window.baseUrl+"/api/resources",type:"GET",data:{resource:e}}).done(function(e){t.selection.add(new u["default"].Model({id:e[0].key,text:e[0].name}))})}}),D=C.extend({initialize:function(){d["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:F}),this.choices=new V},createRequest:function(e){var t=this;return r["default"].ajax({url:window.baseUrl+"/api/resources",type:"GET",data:{resource:e}}).done(function(e){t.choices.add(new u["default"].Model({id:e[0].key,text:e[0].name,checked:!0}))})}}),_=C.extend({initialize:function(){d["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:F}),this.choices=new b},createRequest:function(e){var t=this;return r["default"].ajax({url:window.baseUrl+"/api/users/search",type:"GET",data:{q:e}}).done(function(e){t.choices.add(new u["default"].Model({id:e.users[0].login,text:e.users[0].name+" ("+e.users[0].login+")",checked:!0}))})}});t["default"]={Suggestions:w,AjaxSelectDetailsFilterView:F,AjaxSelectFilterView:C,ProjectFilterView:D,ComponentFilterView:k,AssigneeFilterView:_}},1233:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){return'<div class="navigator-filter-search">\n  <input type="text">\n</div>\n<ul class="navigator-filter-select-list choices"></ul>\n<ul class="navigator-filter-select-list opposite"></ul>\n'},useData:!0})},1234:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(1221),u=n(s),c=i(1225),d=n(c),f=i(1235),h=n(f),p=i(1236),m=n(p),v=u["default"].DetailsFilterView.extend({template:m["default"],events:{"click label[data-id]":"applyFavorite","click .manage label":"manage"},applyFavorite:function(e){var t=(0,r["default"])(e.target).data("id");window.location=window.baseUrl+this.model.get("favoriteUrl")+"/"+t},manage:function(){window.location=window.baseUrl+this.model.get("manageUrl")},serializeData:function(){var e=this.model.get("choices"),t=o["default"].sortBy(o["default"].map(e,function(e,t){return{v:e,k:t}}),"v");return o["default"].extend({},this.model.toJSON(),{choicesArray:t})}}),g=d["default"].ChoiceFilterView.extend({template:h["default"],className:"navigator-filter navigator-filter-favorite",initialize:function(){d["default"].ChoiceFilterView.prototype.initialize.call(this,{projectsView:v})},renderValue:function(){return""},renderInput:function(){},isDefaultValue:function(){return!1}});t["default"]={DetailsFavoriteFilterView:v,FavoriteFilterView:g}},1235:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var r=this.escapeExpression;return'<div class="navigator-filter-favorite-toggle" title="'+r(i(417).call(e,"measure_filter.filter_list",{name:"t",hash:{},data:a}))+'"></div>\n'},useData:!0})},1236:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){var a,r='  <ul class="navigator-filter-select-list">\n';return a=t.each.call(e,null!=e?e.choicesArray:e,{name:"each",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=a&&(r+=a),r+"  </ul>\n"},2:function(e,t,i,n){var a=this.lambda,r=this.escapeExpression;return'      <li>\n        <label data-id="'+r(a(null!=e?e.k:e,e))+'">'+r(a(null!=e?e.v:e,e))+"</label>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var r,l=this.escapeExpression,o="";return r=i(1237).call(e,null!=e?e.choicesArray:e,{name:"ifNotEmpty",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=r&&(o+=r),o+'<ul class="navigator-filter-select-list">\n  <li class="manage">\n    <label id="manage-favorites">'+l(i(417).call(e,"manage",{name:"t",hash:{},data:a}))+"</label>\n  </li>\n</ul>\n"},useData:!0})},1237:function(e,t){"use strict";e.exports=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[t.length-1],a=t.slice(0,-1),r=a.reduce(function(e,t){return e||t&&t.length>0},!1);return r?n.fn(this):n.inverse(this)}},1238:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(1221),u=n(s),c=i(1239),d=n(c),f=i(257),h=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change input":"change"},change:function(){var e={},t=this.$("input").eq(0).val(),i=this.$("input").eq(1).val();t.length>0&&(e[this.model.get("propertyFrom")]=t),i.length>0&&(e[this.model.get("propertyTo")]=i),this.model.set("value",e)},populateInputs:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),n=o["default"].isObject(e)&&e[t],a=o["default"].isObject(e)&&e[i];this.$("input").eq(0).val(n||""),this.$("input").eq(1).val(a||"")},onShow:function(){this.$(":input:first").focus()}}),p=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:h})},renderValue:function(){if(this.isDefaultValue())return(0,f.translate)("any");var e=o["default"].values(this.model.get("value"));return e.join(" — ")},renderInput:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),n=o["default"].isObject(e)&&e[t],a=o["default"].isObject(e)&&e[i];(0,r["default"])("<input>").prop("name",t).prop("type","hidden").css("display","none").val(n||"").appendTo(this.$el),(0,r["default"])("<input>").prop("name",i).prop("type","hidden").css("display","none").val(a||"").appendTo(this.$el)},isDefaultValue:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),n=o["default"].isObject(e)&&e[t],a=o["default"].isObject(e)&&e[i];return!n&&!a},restoreFromQuery:function(e){var t=o["default"].findWhere(e,{key:this.model.get("propertyFrom")}),i=o["default"].findWhere(e,{key:this.model.get("propertyTo")}),n={};(t&&t.value||i&&i.value)&&(t&&t.value&&(n[this.model.get("propertyFrom")]=t.value),i&&i.value&&(n[this.model.get("propertyTo")]=i.value),this.model.set({value:n,enabled:!0}),this.projectsView.populateInputs())},restore:function(e){if(this.choices&&this.selection&&e.length>0){var t=this;this.choices.add(this.selection.models),this.selection.reset([]),o["default"].each(e,function(e){var i=t.choices.findWhere({id:e});i&&(t.selection.add(i),t.choices.remove(i))}),this.projectsView.updateLists(),this.model.set({value:e,enabled:!0})}},formatValue:function(){return this.model.get("value")},clear:function(){this.model.unset("value"),this.projectsView.render()}}),m=p.extend({render:function(){p.prototype.render.apply(this,arguments),this.projectsView.$("input").prop("placeholder","1970-01-31").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}).on("change",function(){(0,r["default"])(this).datepicker("setDate",(0,r["default"])(this).val())})},renderValue:function(){if(this.isDefaultValue())return(0,f.translate)("anytime");var e=o["default"].values(this.model.get("value"));return e.join(" — ")}});t["default"]={RangeFilterView:p,DateRangeFilterView:m}},1239:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var r=this.lambda,l=this.escapeExpression;return'<div class="navigator-filter-details-inner">\n  <input class="navigator-filter-range-input" type="text" name="'+l(r(null!=e?e.propertyFrom:e,e))+'" placeholder="'+l(r(null!=e?e.placeholder:e,e))+'">\n  <label>'+l(i(417).call(e,"to.downcase",{name:"t",hash:{},data:a}))+'</label>\n  <input class="navigator-filter-range-input" type="text" name="'+l(r(null!=e?e.propertyTo:e,e))+'" placeholder="'+l(r(null!=e?e.placeholder:e,e))+'">\n</div>\n'},useData:!0})},1240:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(1221),u=n(s),c=i(1241),d=n(c),f=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change input":"change"},change:function(e){this.model.set("value",(0,r["default"])(e.target).val())},onShow:function(){u["default"].DetailsFilterView.prototype.onShow.apply(this,arguments),this.$(":input").focus()},serializeData:function(){return o["default"].extend({},this.model.toJSON(),{value:this.model.get("value")||""})}});t["default"]=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:f})},renderValue:function(){return this.isDefaultValue()?"—":this.model.get("value")},renderInput:function(){(0,r["default"])("<input>").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(this.model.get("value")||"").appendTo(this.$el)},isDefaultValue:function(){return!this.model.get("value")},restore:function(e){this.model.set({value:e,enabled:!0})},clear:function(){this.model.unset("value"),this.projectsView.render()}})},1241:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var a,r="function",l=t.helperMissing,o=this.escapeExpression;return'<div class="navigator-filter-details-inner">\n  <input type="text" name="'+o((a=null!=(a=t.property||(null!=e?e.property:e))?a:l,typeof a===r?a.call(e,{name:"property",hash:{},data:n}):a))+'" value="'+o((a=null!=(a=t.value||(null!=e?e.value:e))?a:l,typeof a===r?a.call(e,{name:"value",hash:{},data:n}):a))+'">\n</div>\n'},useData:!0})},1242:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(353),r=n(a),l=i(249),o=n(l),s=i(1221),u=n(s),c=i(1243),d=n(c),f=i(257),h=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change :input":"inputChanged"},inputChanged:function(){var e=this.$("[name=metric]").val(),t=0===e.indexOf("new_"),i=this.$("[name=period]"),n=i.val(),a=i.children('[value="0"]'),r={metric:e,period:n,metricText:this.$("[name=metric] option:selected").text(),periodText:this.$("[name=period] option:selected").text(),op:this.$("[name=op]").val(),opText:this.$("[name=op] option:selected").text(),val:this.$("[name=val]").val(),valText:this.$("[name=val]").originalVal()};t?(a.remove(),"0"===n&&(n="1")):0===a.length&&i.prepend(this.periodZeroOption),i.select2("destroy").val(n).select2({width:"100%",minimumResultsForSearch:100}),this.updateDataType(r),this.model.set("value",r)},updateDataType:function(e){var t=o["default"].find(window.SS.metrics,function(t){return t.metric.name===e.metric});t&&(this.$("[name=val]").data("type",t.metric.val_type),"WORK_DUR"===t.metric.val_type&&this.$("[name=val]").prop("placeholder","1d 7h 59min"),"RATING"===t.metric.val_type&&this.$("[name=val]").prop("placeholder","A"))},onRender:function(){var e=this.$("[name=period]").children('[value="0"]').html();this.periodZeroOption='<option value="0">'+e+"</option>";var t=this.model.get("value")||{};this.$("[name=metric]").val(t.metric).select2({width:"100%",placeholder:(0,f.translate)("measure_filter.criteria.metric")}),this.$("[name=period]").val(t.period||0).select2({width:"100%",minimumResultsForSearch:100}),this.$("[name=op]").val(t.op||"eq").select2({width:"60px",placeholder:"=",minimumResultsForSearch:100}),this.updateDataType(t),this.$("[name=val]").val(t.val),this.inputChanged()},onShow:function(){var e=this.$("[name=metric]");""===this.model.get("value").metric?e.select2("open"):e.select2("focus")}});t["default"]=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{projectsView:h}),this.groupMetrics()},groupMetrics:function(){var e=o["default"].map(this.model.get("metrics"),function(e){return e.metric}),t=o["default"].sortBy(o["default"].map(o["default"].groupBy(e,"domain"),function(e,t){return{domain:t,metrics:o["default"].sortBy(e,"short_name")}}),"domain");this.model.set("groupedMetrics",t)},renderValue:function(){return this.isDefaultValue()?(0,f.translate)("measure_filter.criteria.metric.not_set"):this.model.get("value").metricText+" "+this.model.get("value").opText+" "+this.model.get("value").valText},renderInput:function(){var e=this,t=this.model.get("value");o["default"].isObject(t)&&t.metric&&t.op&&null!=t.val&&o["default"].each(["metric","period","op","val"],function(i){var n=t[i];"period"===i&&"0"===n&&(n=""),(0,r["default"])("<input>").prop("name",e.model.get("property")+"_"+i).prop("type","hidden").css("display","none").val(n).appendTo(e.$el)})},isDefaultValue:function(){var e=this.model.get("value");return!o["default"].isObject(e)||!(e.metric&&e.op&&null!=e.val)},restoreFromQuery:function(e){var t=this,i={};o["default"].each(["metric","period","op","val"],function(n){var a=t.model.get("property")+"_"+n,r=o["default"].findWhere(e,{key:a});r&&r.value&&(i[n]=r.value)}),i&&i.metric&&i.op&&null!=i.val&&this.model.set({value:i,enabled:!0})}})},1243:function(e,t,i){var n=i(408);e.exports=(n["default"]||n).template({1:function(e,t,i,n){var a,r=this.lambda,l=this.escapeExpression,o='      <optgroup label="'+l(r(null!=e?e.domain:e,e))+'">\n';return a=t.each.call(e,null!=e?e.metrics:e,{name:"each",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=a&&(o+=a),o+"      </optgroup>\n"},2:function(e,t,i,n){var a=this.lambda,r=this.escapeExpression;return'          <option value="'+r(a(null!=e?e.name:e,e))+'">'+r(a(null!=e?e.short_name:e,e))+"</option>\n"},4:function(e,t,i,n){var a=this.lambda,r=this.escapeExpression;return'      <option value="'+r(a(n&&n.key,e))+'">'+r(a(e,e))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,a){var r,l=this.escapeExpression,o='<div class="navigator-filter-details-inner">\n  <select name="metric">\n    <option></option>\n';return r=t.each.call(e,null!=e?e.groupedMetrics:e,{name:"each",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=r&&(o+=r),o+='  </select>\n\n  <select name="period">\n    <option value="0">'+l(i(417).call(e,"value",{name:"t",hash:{},data:a}))+"</option>\n",r=t.each.call(e,null!=e?e.periods:e,{name:"each",hash:{},fn:this.program(4,a),inverse:this.noop,data:a}),null!=r&&(o+=r),o+='  </select>\n\n  <select name="op">\n',r=t.each.call(e,null!=e?e.operations:e,{name:"each",hash:{},fn:this.program(4,a),inverse:this.noop,data:a}),null!=r&&(o+=r),o+'  </select>\n\n  <input type="text" name="val">\n</div>\n'},useData:!0})}});